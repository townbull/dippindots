#!/bin/bash
RESP=$(curl -s https://www.telize.com/geoip)
LAT=$(echo "$RESP" | jq -r '{latitude} | .[]')
LNG=$(echo "$RESP" | jq -r '{longitude} | .[]')
TEMP=$(curl -s "api.openweathermap.org/data/2.5/weather?lat=${LAT}&lon=${LNG}&units=metric" | jq -r '{temp: .main.temp} | .[]')

if [ -z $TEMP ]; then
    TEMP=?
else
    # round to int
    TEMP=$(printf "%.0f" $TEMP)
fi
echo "${TEMP}Â°c"
